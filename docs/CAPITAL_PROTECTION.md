# Capital Protection Mode - ุญูุงูุฉ ุฑุฃุณ ุงููุงู

## Overview

ูุธุงู ุญูุงูุฉ ุชููุงุฆู ูุฑุฃุณ ุงููุงู ูู ุญุงูุงุช ุงูุงูููุงุฑ ุงูููุงุฌุฆ ููุณูู. ูุตูู ุฎุตูุตุงู ููุญุณุงุจุงุช ุงููุจูุฑุฉ (10k - 20k+) ูุชุฌูุจ ุงูุฎุณุงุฆุฑ ุงููุจูุฑุฉ ุฃุซูุงุก ุงูููุงุฑุงุช ุงูุณูู.

## ููู ูุนููุ

### ุดุฑูุท ุงูุชูุนูู

ูุชู ุชูุนูู ูุถุน ุงูุญูุงูุฉ ุชููุงุฆูุงู ุนูุฏ ุญุฏูุซ ุฃุญุฏ ุงูุดุฑุทูู:

**1. ุงูููุงุฑ BTC:**

- BTC ููุฒู **-1.5%** ุฃู ุฃูุซุฑ ูู **5 ุฏูุงุฆู**

**2. ุงูููุงุฑ ุงูุณูู ุงูุนุงู:**

- **70%** ุฃู ุฃูุซุฑ ูู ุงูุนููุงุช ูู ุงูููุทูุฉ ุงูุญูุฑุงุก

### ุงูุฅุฌุฑุงุกุงุช ุงูุชููุงุฆูุฉ

ุนูุฏ ุชูุนูู ูุถุน ุงูุญูุงูุฉ:

```
๐ ุฅููุงู ูุชุญ ุตููุงุช ุฌุฏูุฏุฉ
๐ซ ุฅูุบุงุก ุฌููุน ุงูุฃูุงูุฑ ุงููุนููุฉ (Pending Orders)
โฐ ุฅููุงู ุงูุชุฏุงูู ููุฏุฉ 2-4 ุณุงุนุงุช
โ ุงูุตููุงุช ุงูููุชูุญุฉ ุชุณุชูุฑ ูู ุงููุฑุงูุจุฉ ุงูุนุงุฏูุฉ
```

### ูุฏุฉ ุงูุญูุงูุฉ

- **ุงูููุงุฑ ุฎููู** (BTC -1.5% ุฅูู -3%): **2 ุณุงุนุงุช**
- **ุงูููุงุฑ ุดุฏูุฏ** (BTC ุฃูุซุฑ ูู -3%): **4 ุณุงุนุงุช**

## ูุซุงู ุนููู

### ุงูุณููุงุฑูู

```
โฐ 10:00 AM - ุงูุณูู ุทุจูุนู
๐ BTC: $45,000
๐ข Market: 60% green, 40% red

โฐ 10:05 AM - ุงูููุงุฑ ููุงุฌุฆ
๐ BTC: $44,325 (-1.5%)
๐ด Market: 75% red, 25% green

๐ CAPITAL PROTECTION ACTIVATED
```

### ูุง ูุญุฏุซ

```
โ ุงูุตููุงุช ุงูููุชูุญุฉ (5 positions):
   - ุชุณุชูุฑ ุงููุฑุงูุจุฉ
   - Stop Loss ูุนูู ุนุงุฏู
   - Take Profit ูุนูู ุนุงุฏู

๐ซ ุงูุฃูุงูุฑ ุงููุนููุฉ (3 pending):
   - ุชู ุฅูุบุงุคูุง ุฌููุนุงู
   - ูู ูุชู ูุชุญ ุตููุงุช ุฌุฏูุฏุฉ

โฐ ูุฏุฉ ุงูุฅููุงู: 2 ุณุงุนุงุช
   - ุญุชู 12:05 PM
   - ุซู ูุณุชุฃูู ุงูุชุฏุงูู ุชููุงุฆูุงู
```

## ุงูุฅุนุฏุงุฏุงุช

ูู `backend/src/config/settings.js`:

```javascript
protection: {
  enabled: true,                // ุชูุนูู/ุชุนุทูู
  btcDropThreshold: -1.5,       // ูุณุจุฉ ุงูุฎูุงุถ BTC
  redMarketThreshold: 70,       // ูุณุจุฉ ุงูุณูู ุงูุฃุญูุฑ
  protectionDurationMin: 2,     // ุณุงุนุชูู (ุงูููุงุฑ ุฎููู)
  protectionDurationMax: 4,     // 4 ุณุงุนุงุช (ุงูููุงุฑ ุดุฏูุฏ)
  checkInterval: 60000,         // ูุญุต ูู ุฏูููุฉ
}
```

### ุชุฎุตูุต ุงูุฅุนุฏุงุฏุงุช

```javascript
// ุฃูุซุฑ ุญุณุงุณูุฉ (ููุญุณุงุจุงุช ุงููุจูุฑุฉ ุฌุฏุงู)
btcDropThreshold: -1.0,        // ุชูุนูู ุนูุฏ -1%
redMarketThreshold: 60,        // ุชูุนูู ุนูุฏ 60% ุฃุญูุฑ

// ุฃูู ุญุณุงุณูุฉ (ููุญุณุงุจุงุช ุงูุตุบูุฑุฉ)
btcDropThreshold: -2.5,        // ุชูุนูู ุนูุฏ -2.5%
redMarketThreshold: 80,        // ุชูุนูู ุนูุฏ 80% ุฃุญูุฑ
```

## ุฅุดุนุงุฑุงุช Telegram

### ุนูุฏ ุงูุชูุนูู

```
๐ CAPITAL PROTECTION MODE ACTIVATED
โโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ๏ธ Reason: BTC dropped -1.8% in 5 minutes
๐ BTC Change (5min): -1.8%
๐ด Red Market: 75.3%
โฐ Duration: 2 hours
๐ซ Canceled 3 pending orders
๐ New trades blocked until 12:05 PM

๐ก Existing positions will be monitored normally.
```

### ุนูุฏ ุงูุฅูุบุงุก

```
โ CAPITAL PROTECTION MODE DEACTIVATED
โโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ข Market conditions normalized
๐ BTC Change (5min): +0.3%
โ Trading resumed
```

## Logs

ูู `backend/logs/YYYY-MM-DD.log`:

```
[2025-11-29T14:05:00.000Z] [WARNING] ๐ CAPITAL PROTECTION MODE ACTIVATED | Reason: BTC dropped -1.8% in 5 minutes | Duration: 2h
[2025-11-29T14:05:00.100Z] [INFO] ๐ซ Canceled 3 pending orders
[2025-11-29T14:06:00.000Z] [WARNING] ๐ Capital Protection Mode active - Trading blocked for 119 more minutes
[2025-11-29T16:05:00.000Z] [SUCCESS] โ Capital Protection Mode deactivated
```

## ููุงุฐุง ูุฐุง ูููุ

### ุจุฏูู Capital Protection

```
๐ฐ Balance: $10,000
๐ 5 positions open @ $2,000 each

โ๏ธ Market crash -5% in 10 minutes
โ Bot opens 3 more positions during crash
โ All 8 positions hit stop loss -2.5%

๐ธ Total Loss: $2,000 (20% of capital)
```

### ูุน Capital Protection

```
๐ฐ Balance: $10,000
๐ 5 positions open @ $2,000 each

โ๏ธ Market crash -5% in 10 minutes
๐ Protection activated immediately
โ No new positions opened
โ Only 5 positions hit stop loss -2.5%

๐ธ Total Loss: $1,250 (12.5% of capital)
๐ฐ Saved: $750
```

## Best Practices

### ููุญุณุงุจุงุช ุงููุจูุฑุฉ (10k+)

```javascript
enabled: true,
btcDropThreshold: -1.0,        // ุญุณุงุณูุฉ ุนุงููุฉ
redMarketThreshold: 60,
protectionDurationMin: 3,      // 3 ุณุงุนุงุช
protectionDurationMax: 6,      // 6 ุณุงุนุงุช
```

### ููุญุณุงุจุงุช ุงููุชูุณุทุฉ (1k-10k)

```javascript
enabled: true,
btcDropThreshold: -1.5,        // ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ
redMarketThreshold: 70,
protectionDurationMin: 2,
protectionDurationMax: 4,
```

### ููุญุณุงุจุงุช ุงูุตุบูุฑุฉ (<1k)

```javascript
enabled: true,
btcDropThreshold: -2.0,        // ุญุณุงุณูุฉ ุฃูู
redMarketThreshold: 75,
protectionDurationMin: 1,      // ุณุงุนุฉ ูุงุญุฏุฉ
protectionDurationMax: 2,
```

## ุงูุชุนุทูู

ุฅุฐุง ููุช ุชุฑูุฏ ุชุนุทูู ุงูููุฒุฉ:

```javascript
// ูู settings.js
protection: {
  enabled: false,
  // ... ุจุงูู ุงูุฅุนุฏุงุฏุงุช
}
```

ุฃู ุนุจุฑ `.env`:

```bash
CAPITAL_PROTECTION=false
```

## Monitoring

### ุงูุชุญูู ูู ุงูุญุงูุฉ

```bash
# ูู ุงูู logs
docker-compose logs backend | grep "PROTECTION"

# ุฃู
docker-compose logs backend | grep "๐"
```

### ุฅุญุตุงุฆูุงุช

ุงูุจูุช ูุฑุงูุจ:

- ุณุนุฑ BTC ูู ุฏูููุฉ
- ุขุฎุฑ 5 ุฏูุงุฆู ูู ุชุงุฑูุฎ ุงูุฃุณุนุงุฑ
- ูุณุจุฉ ุงูุนููุงุช ุงูุญูุฑุงุก/ุงูุฎุถุฑุงุก
- ุญุงูุฉ ูุถุน ุงูุญูุงูุฉ

## FAQ

**Q: ูู ูุชู ุฅุบูุงู ุงูุตููุงุช ุงูููุชูุญุฉุ**
A: ูุงุ ุงูุตููุงุช ุงูููุชูุญุฉ ุชุณุชูุฑ ูู ุงููุฑุงูุจุฉ ุงูุนุงุฏูุฉ ูุน Stop Loss ู Take Profit.

**Q: ูุงุฐุง ูุญุฏุซ ููุฃูุงูุฑ ุงููุนููุฉุ**
A: ูุชู ุฅูุบุงุคูุง ุฌููุนุงู ููุฑุงู ูููุน ูุชุญ ุตููุงุช ุฌุฏูุฏุฉ ุฃุซูุงุก ุงูุงูููุงุฑ.

**Q: ูู ูููู ุฅูุบุงุก ูุถุน ุงูุญูุงูุฉ ูุฏููุงูุ**
A: ูุนูุ ููููู ุฅุนุงุฏุฉ ุชุดุบูู ุงูุจูุช ุฃู ุงูุงูุชุธุงุฑ ุญุชู ุงูุชูุงุก ุงููุฏุฉ ุงููุญุฏุฏุฉ.

**Q: ูู ูุนูู ูู Paper Trading Modeุ**
A: ูุนูุ ูุนูู ูู ูู ุงูุฃูุถุงุน.

**Q: ูู ูุฑุฉ ูุชู ุงููุญุตุ**
A: ูู ุฏูููุฉ (60 ุซุงููุฉ) ุงูุชุฑุงุถูุงู.

## Technical Details

### Market Monitor Service

```javascript
class MarketMonitorService {
  - updateBtcPrice(price)           // ุชุญุฏูุซ ุณุนุฑ BTC
  - getBtcChange5Min()              // ุญุณุงุจ ุงูุชุบูุฑ ูู 5 ุฏูุงุฆู
  - updateMarketSentiment(tickers)  // ุชุญุฏูุซ ูุนูููุงุช ุงูุณูู
  - checkMarketCrash()              // ูุญุต ุงูุงูููุงุฑ
  - activateProtection()            // ุชูุนูู ุงูุญูุงูุฉ
  - deactivateProtection()          // ุฅูุบุงุก ุงูุญูุงูุฉ
  - isProtectionActive()            // ุงูุชุญูู ูู ุงูุญุงูุฉ
}
```

### Integration

```javascript
// ูู bot-modular.js
async checkCapitalProtection() {
  // 1. ุชุญุฏูุซ ุณุนุฑ BTC
  // 2. ุชุญุฏูุซ ูุนูููุงุช ุงูุณูู
  // 3. ูุญุต ุงูุงูููุงุฑ
  // 4. ุชูุนูู ุงูุญูุงูุฉ ุฅุฐุง ูุฒู ุงูุฃูุฑ
  // 5. ุฅุฑุณุงู ุฅุดุนุงุฑุงุช
}
```

## Benefits

โ ุญูุงูุฉ ุชููุงุฆูุฉ ูู ุงูููุงุฑุงุช ุงูุณูู
โ ุชูููู ุงูุฎุณุงุฆุฑ ูู ุงูุฃููุงุช ุงูุญุฑุฌุฉ
โ ููุน ูุชุญ ุตููุงุช ุฌุฏูุฏุฉ ุฃุซูุงุก ุงูุฐุนุฑ
โ ุฅูุบุงุก ุชููุงุฆู ููุฃูุงูุฑ ุงููุนููุฉ
โ ุฅุดุนุงุฑุงุช ููุฑูุฉ ุนูู Telegram
โ ูุงุจู ููุชุฎุตูุต ุญุณุจ ุญุฌู ุงูุญุณุงุจ
โ ูุนูู 24/7 ุจุฏูู ุชุฏุฎู ูุฏูู

## Conclusion

Capital Protection Mode ูู ุฎุท ุฏูุงุน ุฃุณุงุณู ูุญูุงูุฉ ุฑุฃุณ ุงููุงู ูู ุงูุฃุณูุงู ุงููุชููุจุฉ. ูุตูู ุฎุตูุตุงู ูููุชุฏุงูููู ุงูุฐูู ูุฏูุฑูู ุญุณุงุจุงุช ูุจูุฑุฉ ููุฑูุฏูู ุชุฌูุจ ุงูุฎุณุงุฆุฑ ุงููุจูุฑุฉ ุฃุซูุงุก ุงูููุงุฑุงุช ุงูุณูู ุงูููุงุฌุฆุฉ.

**ุชุฐูุฑ:** ุงูููุงูุฉ ุฎูุฑ ูู ุงูุนูุงุฌ. ุฎุณุงุฑุฉ 1% ุฃูุถู ูู ุฎุณุงุฑุฉ 5%.
